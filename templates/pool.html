{% extends "base.html" %}

{% block title %}{{pool.name}}{% endblock %}

{% block head %}
{{ super() }}
<script type="text/javascript" src="/static/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="/static/pool.js"></script>
<link type="text/css" rel="stylesheet" href="/static/pool.css" />
{% endblock %}

{% block content %}
<div class="page-header" style="position:relative;">
  <h1 style="text-align:center">{{pool.name}}</h1>
  {% if pool.admin_user.id == user.id %}
  <div>
    <p style="position:absolute; bottom:0; right:0; margin-bottom:19px; margin-right:5px;"><a href="/pools/{{pool.id}}/admin">Admin Dashboard</a></p>
  </div>
  {% endif %}
</div>
<p style="text-align:center;">
  {% if not locked %}
  <a href="/brackets/choose?p={{pool.id}}" class="btn btn-primary btn-large">Enter a Bracket</a>
  {% else %}
  <a href="/pools/{{pool.id}}/master" class="btn btn-primary btn-large">View Master Bracket/Game Analysis</a>
  <a href="/pools/{{pool.id}}/usersimilarity">See how similar you are to others</a>
  {% endif %}
</p>
<h2>Standings</h2>
<div class="mod-content" style="font-size:13px;">
  <table id="standings" class="table table-striped table-hover tablesorter">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Bracket Name</th>
        <th>Total Score</th>
        <th>Rd 1</th>
        <th>Rd 2</th>
        <th>SS</th>
        <th>EE</th>
        <th>FF</th>
        <th>Champ</th>
        <th>Prior Rank</th>
        <th>Change in Rank</th>
        <th>Max Score</th>
        <th>Max Score Rank</th>
      </tr>
    </thead>
    <tbody>
      {% for e in entries %}
      <tr class="{{loop.cycle('odd', 'even')}} {% if e.own %}user-entry{% endif %}" {% if locked or e.own %}onclick="document.location.href = '/brackets/{{e.id}}';"{% endif %}}>
        <td>{{e.rank}}</td>
        <td>{{e.name}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.total)}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.round_1)}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.round_2)}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.round_3)}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.round_4)}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.round_5)}}</td>
        <td style="text-align:center;">{{'{0:.3g}'.format(e.points.round_6)}}</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}